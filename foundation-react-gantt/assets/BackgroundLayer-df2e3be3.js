import{j as s}from"./jsx-runtime-440fbad5.js";import{R as m,r as d}from"./shim-6ae0d66e.js";import{P as e}from"./Scrollbar-7f4972f2.js";import{b as o,h as b,M as v}from"./timeline-b18108dd.js";class p extends m.Component{shouldComponentUpdate(t){return!!(t.shouldUpdate||this.props.height!==t.height||this.props.top!==t.top||!o(this.props.start).isSame(o(t.start).valueOf())||!o(this.props.end).isSame(o(t.end)))}getStyle(){const{left:t,width:a}=this.props.calculateHorizontalPosition(this.props.start,this.props.end);return{...this.props.style,left:t,width:a,top:this.props.top,height:this.props.height,display:t&&a?"block":"none"}}getClassName(){return`rct9k-highlighted-interval ${this.props.className}`}render(){return s.jsx("div",{className:this.getClassName(),style:this.getStyle()})}}p.propTypes={start:e.oneOfType([e.object,e.number]).isRequired,end:e.oneOfType([e.object,e.number]).isRequired,className:e.string,style:e.object,height:e.number,top:e.number,calculateHorizontalPosition:e.func.isRequired,shouldUpdate:e.bool};p.defaultProps={className:"",style:{},height:void 0,top:void 0,calculateHorizontalPosition:()=>{},shouldUpdate:!1};p.__docgenInfo={description:"@extends React.Component<HighlightedInterval.propTypes>",methods:[{name:"getStyle",docblock:"@returns { object } style",modifiers:[],params:[],returns:{description:"style",type:{name:"object"}},description:null},{name:"getClassName",docblock:"@returns { string } className",modifiers:[],params:[],returns:{description:"className",type:{name:"string"}},description:null}],displayName:"HighlightedInterval",props:{className:{defaultValue:{value:"''",computed:!1},description:`Class name used to render the interval.

@type { string }`,type:{name:"string"},required:!1},style:{defaultValue:{value:"{}",computed:!1},description:`Style used to render the interval.

@type { object }`,type:{name:"object"},required:!1},height:{defaultValue:{value:"undefined",computed:!0},description:`Internal (passed by parent). The height of the highlighted interval.

@type { number }`,type:{name:"number"},required:!1},top:{defaultValue:{value:"undefined",computed:!0},description:"Internal (passed by parent). `HighlightedInterval` uses absolute positioning, thus it needs the `top` property\nto set the top edge if the element.\n\n@type { number }",type:{name:"number"},required:!1},calculateHorizontalPosition:{defaultValue:{value:"() => {}",computed:!1},description:"Internal (passed by parent). This function allows the conversion of `start`/`end` (time) properties to pixels.\n\n@type { Function }",type:{name:"func"},required:!1},shouldUpdate:{defaultValue:{value:"false",computed:!1},description:`Internal (passed by parent). If true timeline will try to minimize re-renders (e.g: the displayed timeline interval changes).

@type { boolean }`,type:{name:"bool"},required:!1},start:{description:"Start of the highlighted interval, as date (numeric/millis or moment object, cf. `Timeline.props.useMoment`).\n\n@type { object | number }",type:{name:"union",value:[{name:"object"},{name:"number"}]},required:!0},end:{description:"End of the highlighted interval, as date (numeric/millis or moment object, cf. `Timeline.props.useMoment`).\n\n@type { object | number}",type:{name:"union",value:[{name:"object"},{name:"number"}]},required:!0}}};class f extends m.Component{constructor(t){super(t),this.state={verticalLines:[],shouldUpdate:!1,weekends:[]},this.calculateHorizontalPosition=this.calculateHorizontalPosition.bind(this)}componentDidMount(){this.calculateHighlightedWeekends()}componentDidUpdate(t){if(this.props.height!==t.height||this.props.width!==t.width||!this.props.startDateTimeline.isSame(t.startDateTimeline)||!this.props.endDateTimeline.isSame(t.endDateTimeline)){this.calculateHighlightedWeekends(),this.setState({shouldUpdate:!0});return}this.state.shouldUpdate&&this.setState({shouldUpdate:!1})}calculateHorizontalPosition(t,a){const i=this.props.endDateTimeline.diff(this.props.startDateTimeline,"milliseconds"),l=(this.props.width-this.props.leftOffset)/i,n=o(t),r=o(a);if(r.isBefore(this.props.startDateTimeline)||n.isAfter(this.props.endDateTimeline))return{};let u=n.diff(this.props.startDateTimeline,"milliseconds"),h=(r<=this.props.endDateTimeline?r:this.props.endDateTimeline).diff(n,"milliseconds");const c=this.props.leftOffset+u*l;let g=Math.round(h*l);return{left:c,width:g}}calculateHighlightedWeekends(){let t=[];if(!this.props.highlightWeekends)return;let a=this.props.startDateTimeline.clone().startOf("day"),i=null;for(;a.isoWeekday()!==6&&a.isoWeekday()!==7;)a=a.add(1,"days");for(;a<this.props.endDateTimeline;)a.isoWeekday()===7?i=a.clone().add(1,"days"):i=a.clone().add(2,"days"),t.push({start:a,end:i,className:`rct9k-background-layer-highlight-weekends ${this.props.highlightWeekendsClassName}`}),a=i.clone().add(5,"days");this.setState({weekends:t})}renderHighlightedWeekends(){return s.jsx(d.Fragment,{children:this.props.highlightWeekends&&this.state.weekends.map((t,a)=>s.jsx(p,{start:t.start,end:t.end,className:t.className,style:this.props.highlightWeekendsStyle,top:this.props.topOffset,height:this.props.height,shouldUpdate:this.state.shouldUpdate,calculateHorizontalPosition:this.calculateHorizontalPosition},a))})}renderCustomComponents(t){return s.jsx(d.Fragment,{children:t.map((a,i)=>m.cloneElement(a,{key:i,height:this.props.height,top:this.props.topOffset,shouldUpdate:this.state.shouldUpdate,calculateHorizontalPosition:this.calculateHorizontalPosition}))})}renderVerticalGrid(){const{verticalGrid:t,topOffset:a,height:i,leftOffset:l,width:n,verticalGridLines:r,verticalGridClassName:u}=this.props;return s.jsx(d.Fragment,{children:t&&r&&s.jsx("div",{className:"rct9k-background-layer-vertical-grid",style:{top:a,height:i,left:l,width:n-l},children:r.map((h,c)=>s.jsx("span",{className:`rct9k-background-layer-vertical-line ${u}`,style:{...this.props.verticalGridStyle,width:h.size}},c))})})}renderNowMarker(){const{nowMarker:t,height:a,topOffset:i,nowMarkerClassName:l}=this.props,n=b(),r=this.props.startDateTimeline.isSameOrBefore(n)&&this.props.endDateTimeline.isSameOrAfter(n);return s.jsx(d.Fragment,{children:t&&r&&s.jsx(v,{date:n,top:0,height:a+i,shouldUpdate:this.state.shouldUpdate,calculateHorizontalPosition:this.calculateHorizontalPosition,className:`rct9k-background-layer-now-marker ${l}`,style:this.props.nowMarkerStyle})})}render(){return s.jsxs("div",{className:"rct9k-background-layer",children:[this.renderHighlightedWeekends(),this.renderCustomComponents(this.props.highlightedIntervals),this.renderNowMarker(),this.renderCustomComponents(this.props.markers),this.renderVerticalGrid()]})}}f.propTypes={highlightWeekends:e.bool,highlightWeekendsClassName:e.string,highlightWeekendsStyle:e.object,nowMarker:e.bool,nowMarkerClassName:e.string,nowMarkerStyle:e.object,verticalGrid:e.bool,verticalGridClassName:e.string,verticalGridStyle:e.object,markers:e.arrayOf(e.object),highlightedIntervals:e.arrayOf(e.object),startDateTimeline:e.object,endDateTimeline:e.object,height:e.number,topOffset:e.number,width:e.number,leftOffset:e.number,verticalGridLines:e.arrayOf(e.object)};f.defaultProps={highlightWeekends:!1,highlightWeekendsClassName:void 0,highlightWeekendsStyle:void 0,nowMarker:!1,nowMarkerClassName:void 0,nowMarkerStyle:void 0,verticalGrid:!1,verticalGridClassName:void 0,verticalGridStyle:void 0,verticalGridLines:[],markers:[],highlightedIntervals:[],height:void 0,topOffset:void 0,width:void 0,leftOffset:void 0,startDateTimeline:void 0,endDateTimeline:void 0};f.__docgenInfo={description:"@extends React.Component<BackgroundLayer.propTypes>",methods:[{name:"calculateHorizontalPosition",docblock:`It calculates the horizontal position (left and width in pixels) of an element from the time positions (start, end).
@param { object | number } start
@param { object | number } end
@returns { object } left position and width in pixels`,modifiers:[],params:[{name:"start",type:{name:"union",elements:[{name:"object"},{name:"number"}]},optional:!1},{name:"end",type:{name:"union",elements:[{name:"object"},{name:"number"}]},optional:!1}],returns:{description:"left position and width in pixels",type:{name:"object"}},description:"It calculates the horizontal position (left and width in pixels) of an element from the time positions (start, end)."},{name:"calculateHighlightedWeekends",docblock:"Calculates the weekend intervals for the timeline displayed interval (`startDateTimeline` - `endDateTimeline`).",modifiers:[],params:[],returns:null,description:"Calculates the weekend intervals for the timeline displayed interval (`startDateTimeline` - `endDateTimeline`)."},{name:"renderHighlightedWeekends",docblock:null,modifiers:[],params:[],returns:null},{name:"renderCustomComponents",docblock:null,modifiers:[],params:[{name:"components",optional:!1,type:null}],returns:null},{name:"renderVerticalGrid",docblock:null,modifiers:[],params:[],returns:null},{name:"renderNowMarker",docblock:null,modifiers:[],params:[],returns:null}],displayName:"BackgroundLayer",props:{highlightWeekends:{defaultValue:{value:"false",computed:!1},description:"If `true`, it highlights the weekends.\n\n@type { boolean }",type:{name:"bool"},required:!1},highlightWeekendsClassName:{defaultValue:{value:"undefined",computed:!0},description:`Custom class name for highlighting the weekends.

NOTE: No need to provide this; because it has a default class. If a custom class is provided, \`!important\` should be used to override properties from the default class.

@type { string }`,type:{name:"string"},required:!1},highlightWeekendsStyle:{defaultValue:{value:"undefined",computed:!0},description:`Custom style for highlighting the weekends.

NOTE: No need to provide this; because it has a default class.

@type { object }`,type:{name:"object"},required:!1},nowMarker:{defaultValue:{value:"false",computed:!1},description:"If `true`, it draws a marker (vertical line) that indicates the current time.\n\n@type { boolean }",type:{name:"bool"},required:!1},nowMarkerClassName:{defaultValue:{value:"undefined",computed:!0},description:`Custom class name for now marker.

NOTE: No need to provide this; because it has a default class. If a custom class is provided, \`!important\` should be used to override properties from the default class.

@type { string }`,type:{name:"string"},required:!1},nowMarkerStyle:{defaultValue:{value:"undefined",computed:!0},description:`Custom style for now marker.

NOTE: No need to provide this; because it has a default class.

@type { object }`,type:{name:"object"},required:!1},verticalGrid:{defaultValue:{value:"false",computed:!1},description:"If `true`, it draws vertical lines, according to the intervals defined by the bottom `Timebar`.\n\n@type { boolean }",type:{name:"bool"},required:!1},verticalGridClassName:{defaultValue:{value:"undefined",computed:!0},description:`Custom class name for vertical grid.

NOTE: No need to provide this; because it has a default class. If a custom class is provided, \`!important\` should be used to override properties from the default class.

@type { string }`,type:{name:"string"},required:!1},verticalGridStyle:{defaultValue:{value:"undefined",computed:!0},description:`Custom style for vertical grid.

NOTE: No need to provide this; because it has a default class.

@type { object }`,type:{name:"object"},required:!1},verticalGridLines:{defaultValue:{value:"[]",computed:!1},description:"Internal (passed by parent). The vertical lines of the grid are already calculated by `Timerbar`.\n\n@type { Array.<object>}",type:{name:"arrayOf",value:{name:"object"}},required:!1},markers:{defaultValue:{value:"[]",computed:!1},description:"@type { Array.<JSX.Element> }",type:{name:"arrayOf",value:{name:"object"}},required:!1},highlightedIntervals:{defaultValue:{value:"[]",computed:!1},description:"@type { Array.<JSX.Element> }",type:{name:"arrayOf",value:{name:"object"}},required:!1},height:{defaultValue:{value:"undefined",computed:!0},description:`Internal (passed by parent). The height of the background layer.

@type { number }`,type:{name:"number"},required:!1},topOffset:{defaultValue:{value:"undefined",computed:!0},description:`Internal (passed by parent). The position of the top edge of background layer.

@type { number }`,type:{name:"number"},required:!1},width:{defaultValue:{value:"undefined",computed:!0},description:`Internal (passed by parent). Total width of the timeline.

@type { number }`,type:{name:"number"},required:!1},leftOffset:{defaultValue:{value:"undefined",computed:!0},description:`Internal (passed by parent). The position of the left edge of background layer.

@type { number }`,type:{name:"number"},required:!1},startDateTimeline:{defaultValue:{value:"undefined",computed:!0},description:`Internal (passed by parent). Start of the timeline display interval, as date (moment object).

@type { object }`,type:{name:"object"},required:!1},endDateTimeline:{defaultValue:{value:"undefined",computed:!0},description:`Internal (passed by parent). End of the timeline display interval, as date (moment object).

@type { object }`,type:{name:"object"},required:!1}}};export{f as B,p as H};
//# sourceMappingURL=BackgroundLayer-df2e3be3.js.map
