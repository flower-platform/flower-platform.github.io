var l=Object.defineProperty;var E=(n,t,e)=>t in n?l(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var r=(n,t,e)=>(E(n,typeof t!="symbol"?t+"":t,e),e);const{EVENT_RUN_BEGIN:h,EVENT_RUN_END:d,EVENT_TEST_FAIL:T,EVENT_TEST_PASS:_,EVENT_SUITE_BEGIN:g,EVENT_SUITE_END:N,EVENT_TEST_BEGIN:I,EVENT_TEST_END:k}=Mocha.Runner.constants;class p extends Mocha.reporters.Base{constructor(e,c){super(e,c);r(this,"_indents",0);const i=e.stats;e.once(h,()=>{this.log("start")}).on(g,s=>{this.increaseIndent(),this.log(this.indent()+"[suite] "+s.title)}).on(N,()=>{this.decreaseIndent()}).on(I,s=>{this.increaseIndent(),this.log(this.indent()+"[test begin] "+s.title)}).on(k,()=>{this.decreaseIndent()}).on(_,s=>{this.log(`${this.indent()}[test passed] ${s.title}`)}).on(T,(s,o)=>{if(this.log(`${this.indent()}[test failed] (**look in the console for the clickable stacktrace**): ${s.title}. Error = ${o}`),console.log("Test '"+s.title+"' has failed w/ the following error (should have clickable stacktrace):"),console.log(o),Object.getPrototypeOf(o).name!=="Error"){const a=new Error;a.stack=o.stack,console.log("Printing the error again, to make sure we have a clickable stacktrace:"),console.log(a)}}).once(d,()=>{this.log(`end: ${i.passes}/${i.passes+i.failures} ok`)})}indent(){return Array(this._indents).join("  ")}increaseIndent(){this._indents++}decreaseIndent(){this._indents--}log(e){console.log(e)}}export{p as ReporterFromSlaveToMaster};
